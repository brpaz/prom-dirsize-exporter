<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# prom\-dirsize\-exporter

```go
import "github.com/brpaz/prom-dirsize-exporter"
```

Package main provides the entry point for the application. It is responsible for initializing the global dependencies like logging and executing the root command.

## Index



# cmd

```go
import "github.com/brpaz/prom-dirsize-exporter/cmd"
```

## Index

- [func NewRootCmd\(logger \*zap.Logger\) \*cobra.Command](<#NewRootCmd>)
- [func NewServeCmd\(logger \*zap.Logger\) \*cobra.Command](<#NewServeCmd>)
- [func NewVersionCmd\(\) \*cobra.Command](<#NewVersionCmd>)
- [func SetFlagsFromEnv\(cmd \*cobra.Command\) error](<#SetFlagsFromEnv>)


<a name="NewRootCmd"></a>
## func NewRootCmd

```go
func NewRootCmd(logger *zap.Logger) *cobra.Command
```

NewRootCmd returns a new instance of the root command for the application

<a name="NewServeCmd"></a>
## func NewServeCmd

```go
func NewServeCmd(logger *zap.Logger) *cobra.Command
```

NewServeCmd returns a new instance of the serve command that will start the metrics http server

<a name="NewVersionCmd"></a>
## func NewVersionCmd

```go
func NewVersionCmd() *cobra.Command
```

NewVersionCmd returns a new instance of the version command

<a name="SetFlagsFromEnv"></a>
## func SetFlagsFromEnv

```go
func SetFlagsFromEnv(cmd *cobra.Command) error
```

SetFlagsFromEnv sets the command flags from environment variables. The environment variables take precedence over any defined flag.

# collector

```go
import "github.com/brpaz/prom-dirsize-exporter/internal/collector"
```

Package collector defines the main Prometheus collector for directory size metrics.

## Index

- [Constants](<#constants>)
- [type DirectoryCollector](<#DirectoryCollector>)
  - [func NewDirectoryCollector\(opts ...DirectoryCollectorOption\) \*DirectoryCollector](<#NewDirectoryCollector>)
  - [func \(c \*DirectoryCollector\) Collect\(ch chan\<\- prometheus.Metric\)](<#DirectoryCollector.Collect>)
  - [func \(c \*DirectoryCollector\) Describe\(ch chan\<\- \*prometheus.Desc\)](<#DirectoryCollector.Describe>)
  - [func \(c \*DirectoryCollector\) Directories\(\) \[\]string](<#DirectoryCollector.Directories>)
- [type DirectoryCollectorOption](<#DirectoryCollectorOption>)
  - [func WithDirectories\(dirs \[\]string\) DirectoryCollectorOption](<#WithDirectories>)
  - [func WithLogger\(logger \*zap.Logger\) DirectoryCollectorOption](<#WithLogger>)


## Constants

<a name="CollectorNamespace"></a>

```go
const (
    CollectorNamespace = "directory"
    CollectorName      = "size_bytes"
)
```

<a name="DirectoryCollector"></a>
## type DirectoryCollector

DirectoryCollector collects directory size metrics

```go
type DirectoryCollector struct {
    // contains filtered or unexported fields
}
```

<a name="NewDirectoryCollector"></a>
### func NewDirectoryCollector

```go
func NewDirectoryCollector(opts ...DirectoryCollectorOption) *DirectoryCollector
```

NewDirectoryCollector creates a new DirectoryCollector with the provided options

<a name="DirectoryCollector.Collect"></a>
### func \(\*DirectoryCollector\) Collect

```go
func (c *DirectoryCollector) Collect(ch chan<- prometheus.Metric)
```

Collect implements the prometheus.Collector interface.

<a name="DirectoryCollector.Describe"></a>
### func \(\*DirectoryCollector\) Describe

```go
func (c *DirectoryCollector) Describe(ch chan<- *prometheus.Desc)
```

Describe implements the prometheus.Collector interface.

<a name="DirectoryCollector.Directories"></a>
### func \(\*DirectoryCollector\) Directories

```go
func (c *DirectoryCollector) Directories() []string
```

Directories returns the directories being monitored

<a name="DirectoryCollectorOption"></a>
## type DirectoryCollectorOption

DirectoryCollectorOption represents an option to customize DirectoryCollector behavior

```go
type DirectoryCollectorOption func(*DirectoryCollector)
```

<a name="WithDirectories"></a>
### func WithDirectories

```go
func WithDirectories(dirs []string) DirectoryCollectorOption
```

WithDirectories sets the directories to monitor

<a name="WithLogger"></a>
### func WithLogger

```go
func WithLogger(logger *zap.Logger) DirectoryCollectorOption
```

WithLogger sets the logger of the DirectoryCollector

# server

```go
import "github.com/brpaz/prom-dirsize-exporter/internal/server"
```

## Index

- [Constants](<#constants>)
- [type MetricsServer](<#MetricsServer>)
  - [func NewMetricsServer\(opts ...MetricsServerOption\) \*MetricsServer](<#NewMetricsServer>)
  - [func \(s \*MetricsServer\) Start\(\) error](<#MetricsServer.Start>)
  - [func \(s \*MetricsServer\) Stop\(\) error](<#MetricsServer.Stop>)
- [type MetricsServerOption](<#MetricsServerOption>)
  - [func WithLogger\(logger \*zap.Logger\) MetricsServerOption](<#WithLogger>)
  - [func WithPath\(metricsPath string\) MetricsServerOption](<#WithPath>)
  - [func WithPort\(port int\) MetricsServerOption](<#WithPort>)


## Constants

<a name="DefaultMetricsPort"></a>

```go
const (
    DefaultMetricsPort = 8080
    DefaultMetricsPath = "/metrics"
)
```

<a name="MetricsServer"></a>
## type MetricsServer



```go
type MetricsServer struct {
    // contains filtered or unexported fields
}
```

<a name="NewMetricsServer"></a>
### func NewMetricsServer

```go
func NewMetricsServer(opts ...MetricsServerOption) *MetricsServer
```

NewMetricsServer creates a new MetricsServer with the provided options. It uses golang http.Server to create a new server instance to expose the prometheus metrics.

<a name="MetricsServer.Start"></a>
### func \(\*MetricsServer\) Start

```go
func (s *MetricsServer) Start() error
```



<a name="MetricsServer.Stop"></a>
### func \(\*MetricsServer\) Stop

```go
func (s *MetricsServer) Stop() error
```

Stop stops the MetricsServer gracefully

<a name="MetricsServerOption"></a>
## type MetricsServerOption

MetricsServerOption is a function that configures a MetricsServer

```go
type MetricsServerOption func(*MetricsServer)
```

<a name="WithLogger"></a>
### func WithLogger

```go
func WithLogger(logger *zap.Logger) MetricsServerOption
```

WithLogger sets the logger of the MetricsServer

<a name="WithPath"></a>
### func WithPath

```go
func WithPath(metricsPath string) MetricsServerOption
```

WithPath sets the metrics path of the MetricsServer

<a name="WithPort"></a>
### func WithPort

```go
func WithPort(port int) MetricsServerOption
```

WithPort sets the port of the MetricsServer

# testutil

```go
import "github.com/brpaz/prom-dirsize-exporter/internal/testutil"
```

## Index

- [func GetFreePort\(\) \(port int, err error\)](<#GetFreePort>)


<a name="GetFreePort"></a>
## func GetFreePort

```go
func GetFreePort() (port int, err error)
```

GetFreePort asks the kernel for a free open port that is ready to use.

# version

```go
import "github.com/brpaz/prom-dirsize-exporter/internal/version"
```

## Index

- [Variables](<#variables>)


## Variables

<a name="BuildDate"></a>

```go
var (
    BuildDate = ""
    Version   = "dev"
    GitCommit = ""
)
```

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
